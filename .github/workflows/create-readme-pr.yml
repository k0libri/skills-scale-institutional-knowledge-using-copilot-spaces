name: Create docs README and PR
on:
  workflow_dispatch:

permissions:
  contents: write
  pull-requests: write

jobs:
  create_pr:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create docs/README.md
        run: |
          mkdir -p docs
          cat > docs/README.md <<'README'
# OctoAcme — Project Management Overview

This repository contains OctoAcme's project management process documents and templates used to plan, execute, and improve cross-functional work. OctoAcme runs a lightweight, iterative lifecycle: Initiation (one-pager, stakeholder alignment, decision gate), Planning (kickoff, prioritized backlog, estimates, Definition of Done), Execution (boards, PR workflow, CI), Release (pre-release checks, deployment checklist, rollback plan), and Close/Retrospective (action items and follow-up). Key artifacts include the Project One-pager, roadmap and release plan, backlog with acceptance criteria, a risk register, and retrospective notes.

Workflows center on a prioritized backlog and a visible project board with columns like Backlog → Ready → In Progress → In Review → QA → Done, and a disciplined pull request flow: small PRs, linked issues and acceptance criteria, automated CI and security scans, and required approvals. Planning focuses on shippable increments, capacity-aware pulls, and explicit acceptance criteria. Releases follow a checklist-driven approach with staging smoke tests, automated pipelines where possible, post-deploy verifications, and documented rollback/playbooks.

Roles and communication are explicit: Product Managers own outcomes and success metrics; Project Managers coordinate delivery, risks, and stakeholder communications; Developers implement and maintain tests and docs; QA validates acceptance. Regular cadence includes daily standups, weekly delivery syncs, PM+PdM alignment, and monthly stakeholder updates. Communication uses a single source-of-truth (project README or release doc), weekly status templates, and defined escalation paths for blockers and security incidents.

Quality assurance is integrated into development: unit and integration tests, end-to-end smoke tests for critical flows, CI security scanning, and manual QA where needed. CI gates and PR conventions enforce test and lint runs before review; deployment checklists and rollback procedures reduce release risk. Continuous improvement is driven by timeboxed retrospectives that produce a small number of prioritized action items tracked back into the backlog.
README

      - name: Commit & push branch
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
          if git rev-parse --verify feature/add-process-readme >/dev/null 2>&1; then
            git checkout feature/add-process-readme
          else
            git checkout -b feature/add-process-readme
          fi
          git add docs/README.md
          git commit -m "docs: add brief project-management overview README in docs/" || echo "No changes to commit"
          git push --set-upstream origin feature/add-process-readme

      - name: Create pull request
        uses: peter-evans/create-pull-request@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: "docs: add brief project-management overview README in docs/"
          branch: feature/add-process-readme
          title: 'docs: add OctoAcme project-management overview README'
          body: |
            Add docs/README.md with a concise overview of OctoAcme project management processes.

            Closes #3
          base: main
          reviewers: |
            k0libri
